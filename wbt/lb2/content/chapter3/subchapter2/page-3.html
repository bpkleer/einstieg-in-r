---
title: "tidy up statclass"  # Titel der Seite
weight: 323  # Individuelles Gewicht 
menuTitle: "" # Falls Titel zulang ist, hier Kurztitel
tags: ["tidyr", "tidyverse", "datensatz"]  # Tags hiereinsetzen; Kurzwort, was auf der Seite passsiert
---

<script src="/statsplus/lb2/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p>In der Tabelle kann die Note jeder Person aus jeder Prüfung ausgelesen werden. Überlegt kurz, welche Variablen wir bei diesem Satz generieren möchten!</p>
<pre class="r"><code>statclass</code></pre>
<pre><code>##     name stat1 stat2  r spss
## 1   momo    12     5  6    9
## 2    kim    14    10 13   15
## 3 sascha     7     4  4    1</code></pre>
<blockquote>
<ul>
<li><code>names</code>: momo, sascha, kim</li>
<li><code>course</code>: statI, statII, r, spss</li>
<li><code>grade</code>: Wert in Abhängigkeit der zwei oberen.</li>
</ul>
</blockquote>
<p>Es sind also zwei Informationen in den Spalten <code>stat1</code>, <code>stat2</code>, <code>r</code> und <code>spss</code>. Nämlich welcher Test es ist (implizit über Variablenname) und die Note. D.h. hier sind Werte als Variablenname angegeben und das verstößt gegen die Regeln eines <em>tidy</em> Datensatzes. Wir benötigen in einem <em>tidy</em>-Format aber beide Informationen explizit! Denn die Spaltennamen sind hier Werte (Art der Prüfung) und nicht einfach Namen.</p>
<p>Um dies zu bereinigen, nutzt man <code>pivot_longer()</code>. Hierbei geben wir zuerst an, welche Spalten neugeordnet werden sollen (in unserem Fall <code>stat1</code> bis <code>spss</code>), dann in welche neuen Variablen die Namen bzw. die Werte gespeichert werden sollen. Mit <code>names_to</code> benennen wir die neue Variable, die den Test unterscheidet und mit <code>values_to</code> benennen wir die Variable, die die Noten beinhaltet.</p>
<pre class="r"><code>statclassTidy &lt;- statclass %&gt;% 
  pivot_longer(
    stat1:spss, 
    names_to = &quot;course&quot;, 
    values_to = &quot;grade&quot;
  ) %&gt;% 
  arrange(
    name,
    course
  )

statclassTidy</code></pre>
<pre><code>## # A tibble: 12 x 3
##    name   course grade
##    &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt;
##  1 kim    r         13
##  2 kim    spss      15
##  3 kim    stat1     14
##  4 kim    stat2     10
##  5 momo   r          6
##  6 momo   spss       9
##  7 momo   stat1     12
##  8 momo   stat2      5
##  9 sascha r          4
## 10 sascha spss       1
## 11 sascha stat1      7
## 12 sascha stat2      4</code></pre>
<p>Jetzt haben wir ein <em>long</em>-Format, dass die Datenbearbeitung oft einfacher macht (z.B. mit <code>ggplot2</code>). <strong>Aber Aufpassen</strong>: Man kann jetzt nicht einfach mehr einen Mittelwert von <code>grade</code> berechnen, da dies verschiedene Kurse beinhaltet. Man muss dabei also Bedingungen setzen (wenn man im <em>long</em>-Format ist).</p>
<p>Möchte man dies wieder umkehren, nutzt man die Funktion <code>pivot_wider()</code>:</p>
<pre class="r"><code>statclassRe &lt;- statclassTidy %&gt;% 
  pivot_wider(
    names_from = course, 
    values_from = grade, 
  )

statclassRe</code></pre>
