---
title: "tidy up statclass 2"  # Titel der Seite
weight: 324  # Individuelles Gewicht 
menuTitle: "" # Falls Titel zulang ist, hier Kurztitel
tags: ["tidyr", "tidyverse", "datensatz"]  # Tags hiereinsetzen; Kurzwort, was auf der Seite passsiert
---



<p>{{% buttonGit href="https://gitlab.ub.uni-giessen.de/methoden-politik/einstieg-in-r/issues/new?issue[title]=" icon="fas fa-bug" %}} {{% /buttonGit %}}</p>
<p>{{% button href="https://twitter.com/intent/tweet" icon="fab fa-twitter" %}} {{% /button %}}</p>
<p>{{% buttonGit href="https://www.facebook.com/sharer/sharer.php?u=" icon="fab fa-facebook" %}} {{% /buttonGit %}}</p>
<p>Wo liegt hier das Problem?</p>
<pre class="r"><code>statclass2</code></pre>
<pre><code>##    test momo kim sascha  exam
## 1 stat1   12  13      4 exam1
## 2 stat1   NA  NA      8 exam2
## 3 stat2    5  10      5 exam1
## 4 stat2   NA  NA     NA exam2
## 5     r    6  13      3 exam1
## 6     r   NA  NA      9 exam2
## 7  spss    9   4      7 exam1
## 8  spss   NA   7     NA exam2</code></pre>
<blockquote>
<ul>
<li>Namenwerte sind Spaltennamen!</li>
</ul>
</blockquote>
<p>Und hier die Lösung: Auch hier wandeln wir wieder in das <em>long</em>-Format um!</p>
<pre class="r"><code>statclass2Tidy &lt;- statclass2 %&gt;%
  pivot_longer(
    momo:sascha, 
    names_to = &quot;names&quot;, 
    values_to = &quot;grade&quot;
  )

statclass2Tidy</code></pre>
<pre><code>## # A tibble: 24 × 4
##    test  exam  names  grade
##    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;
##  1 stat1 exam1 momo      12
##  2 stat1 exam1 kim       13
##  3 stat1 exam1 sascha     4
##  4 stat1 exam2 momo      NA
##  5 stat1 exam2 kim       NA
##  6 stat1 exam2 sascha     8
##  7 stat2 exam1 momo       5
##  8 stat2 exam1 kim       10
##  9 stat2 exam1 sascha     5
## 10 stat2 exam2 momo      NA
## # ℹ 14 more rows</code></pre>
<p>Gibt es evtl. noch mehr Probleme?</p>
<blockquote>
<ul>
<li><code>exam</code> beinhaltet keine Werte, sondern Namen von Variablen, nämlich von <code>exam1</code> und <code>exam2</code>! Variablen, die die Note in der Prüfung angeben, deren Wert noch in <code>grade</code> steht. Deshalb nutzen wir hier jetzt <code>pivot_wider()</code>, um die Daten final <em>tidy</em> zu machen:</li>
</ul>
</blockquote>
<pre class="r"><code>statclass2Tidy &lt;- statclass2Tidy %&gt;% 
  pivot_wider(
    names_from = exam, 
    values_from = grade
  ) %&gt;% 
  relocate(names) %&gt;% 
  arrange(
    names,
    test
  )

statclass2Tidy</code></pre>
<p>Nur zur Übung könnte man auch dies wiederum in den Ursprungsdatensatz mit <code>pivot_wider()</code> verändern:</p>
<pre class="r"><code>statclass2re &lt;- statclass2Tidy %&gt;% 
  pivot_wider(
    names_from = test,
    values_from = c(
      exam1, 
      exam2
    )
  )</code></pre>
